This file is a merged representation of the entire codebase, combined into a single document by Repomix.

<file_summary>
This section contains a summary of this file.

<purpose>
This file contains a packed representation of the entire repository's contents.
It is designed to be easily consumable by AI systems for analysis, code review,
or other automated processes.
</purpose>

<file_format>
The content is organized as follows:
1. This summary section
2. Repository information
3. Directory structure
4. Repository files (if enabled)
5. Multiple file entries, each consisting of:
  - File path as an attribute
  - Full contents of the file
</file_format>

<usage_guidelines>
- This file should be treated as read-only. Any changes should be made to the
  original repository files, not this packed version.
- When processing this file, use the file path to distinguish
  between different files in the repository.
- Be aware that this file may contain sensitive information. Handle it with
  the same level of security as you would the original repository.
</usage_guidelines>

<notes>
- Some files may have been excluded based on .gitignore rules and Repomix's configuration
- Binary files are not included in this packed representation. Please refer to the Repository Structure section for a complete list of file paths, including binary files
- Files matching patterns in .gitignore are excluded
- Files matching default ignore patterns are excluded
- Files are sorted by Git change count (files with more changes are at the bottom)
</notes>

</file_summary>

<directory_structure>
__init__.py
__manifest__.py
.gitignore
models/__init__.py
models/inherit_account_payment.py
models/inherit_res_partner.py
models/vet_appointment.py
models/vet_medication.py
models/vet_patient.py
models/vet_treatment.py
README.md
security/ir.model.access.csv
static/description/icon.png
views/inherit_res_partner_views.xml
views/menus.xml
views/vet_appointment_views.xml
wizard/.gitkeep
</directory_structure>

<files>
This section contains the contents of the repository's files.

<file path="models/inherit_account_payment.py">
from odoo import models, fields

class AccountPayment(models.Model):
    _inherit = 'account.payment'

    # Se crea la relaci√≥n inversa hacia la cita
    vet_appointment_id = fields.Many2one(
        'vet.appointment',
        string='Cita Veterinaria',
        readonly=True
    )

    vet_payment_method_type = fields.Selection([
        ('cash', 'Efectivo'),
        ('yape', 'Yape'),
        ('plin', 'Plin'),
        ('credit_card', 'Tarjeta de Credito'),
        ('debit_card', 'Tarjeta de Debito'),
        ('transfer', 'Transferencia'),
    ], string='Tipo de Pago')
</file>

<file path="views/inherit_res_partner_views.xml">
<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <record id="res_partner_view_tree" model="ir.ui.view">
        <field name="name">res.partner.view.tree</field>
        <field name="model">res.partner</field>
        <field name="mode">primary</field>
        <field name="inherit_id" ref="base.view_partner_tree" />
        <field name="arch" type="xml">
            <xpath expr="//field[@name='email']" position="after">
                <field name="is_vet_doctor" optional="show" />
            </xpath>
        </field>
    </record>

    <record id="res_partner_view_kanban" model="ir.ui.view">
        <field name="name">res.partner.view.kanban</field>
        <field name="model">res.partner</field>
        <field name="mode">primary</field>
        <field name="inherit_id" ref="base.res_partner_kanban_view" />
        <field name="arch" type="xml">
            <xpath expr="//field[@name='id']" position="after">
                <field name="is_vet_doctor" />
            </xpath>
            <xpath expr="//div[hasclass('oe_kanban_details')]" position="inside">
                <div t-if="record.is_vet_doctor.raw_value" class="mt-1">
                    <span class="badge text-bg-info">Veterinario</span>
                </div>
            </xpath>
        </field>
    </record>

    <record id="res_partner_view_form" model="ir.ui.view">
        <field name="name">res.partner.view.form</field>
        <field name="model">res.partner</field>
        <field name="mode">primary</field>
        <field name="inherit_id" ref="base.view_partner_form" />
        <field name="arch" type="xml">
            <xpath expr="//field[@name='vat']" position="after">
                <field name="is_vet_doctor" />
                <field name="pet_ids" string="Mascotas" context="{'default_partner_id': active_id}" />
            </xpath>
        </field>
    </record>

</odoo>
</file>

<file path="views/vet_appointment_views.xml">
<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <record id="vet_appointment_view_tree" model="ir.ui.view">
        <field name="name">vet.appointment.view.tree</field>
        <field name="model">vet.appointment</field>
        <field name="arch" type="xml">
            <tree string="Lista de Citas">
                <field name="code" string="Codigo de referencia" />
                <field name="partner_id" string="Due√±o de mascota" />
                <field name="date_time" string="Fecha y hora" />
                <field name="pet_ids" string="Nombre de la mascota" />
                <field name="state" string="Estado de la cita" widget="badge"
                    decoration-muted="state == 'draft'"
                    decoration-info="state == 'confirmed'"
                    decoration-success="state == 'done'"
                    decoration-danger="state == 'cancel'" />
            </tree>
        </field>
    </record>

    <record id="vet_appointment_view_form" model="ir.ui.view">
        <field name="name">vet.appointment.view.form</field>
        <field name="model">vet.appointment</field>
        <field name="arch" type="xml">
            <form string="Registro de cita">
                <header>
                    <field name="state" widget="statusbar" />
                </header>
                <sheet>
                    <group name="group_1" string="Datos generales">
                        <field name="date_time" string="Fecha de registro" />
                        <field name="partner_id" string="Nombre due√±o de mascota" />
                        <field name="pet_ids" string="Nombre de mascota" />
                        <field name="description" string="Observaciones" />
                    </group>
                </sheet>
                <notebook>
                    <page string="Pagos">
                        <field name="payment_ids"
                            context="{
                                'default_partner_id': partner_id,
                                'default_payment_type': 'inbound',
                                'default_partner_type': 'customer'
                            }">
                            <tree string="Pagos de la cita" editable="bottom">
                                <field name="date" />
                                <field name="name" string="Referencia" readonly="1" />
                                <field name="suitable_journal_ids" column_invisible="True" />
                                <field name="journal_id" string="Diario" />
                                <field name="vet_payment_method_type" string="M√©todo" />
                                <field name="amount" sum="Total" />
                                <field name="currency_id" column_invisible="True" />
                                <field name="state" widget="badge"
                                    decoration-success="state == 'posted'"
                                    decoration-info="state == 'draft'" />
                            </tree>
                        </field>
                    </page>
                </notebook>
            </form>
        </field>
    </record>
</odoo>
</file>

<file path="__init__.py">
from . import models
from . import wizard
</file>

<file path=".gitignore">
__pycache__
</file>

<file path="models/vet_treatment.py">
from odoo import models, fields

class VetTreatment(models.Model):
    _name = 'vet.treatment'
    _description = 'Resultado m√©dico de una cita'

    # Muchos resultados medicos pertenecen a una cita "vet.appointment"
    appointment_id = fields.Many2one('vet.appointment', string='Cita relacionada')
    diagnosis = fields.Text(string='Diagn√≥stico m√©dico')
    medication_ids = fields.Many2many('vet.medication', string='Medicinas recetadas')
</file>

<file path="models/__init__.py">
from . import vet_patient
from . import vet_appointment
from . import vet_medication
from . import vet_treatment
from . import inherit_res_partner
from . import inherit_account_payment
</file>

<file path="models/inherit_res_partner.py">
from odoo import models, fields

class InheritResPartner(models.Model):
    _inherit = 'res.partner'
    
    is_vet_doctor = fields.Boolean(
        default=False,
        help="Es un veterinario?") 
           
    pet_ids = fields.One2many(
        'vet.patient', 
        'partner_id',
        string="Mascotas")
</file>

<file path="models/vet_medication.py">
from odoo import models, fields

class VetMedication(models.Model):
    _name = 'vet.medication'
    _description = 'Modelo de cat√°logo de medicamentos'

    name = fields.Char(string='Medicamento', required=True)
    active = fields.Boolean(string='Activo', default=True)
    price = fields.Float(string='Precio unitario')
</file>

<file path="models/vet_patient.py">
from odoo import models, fields

class VetPatient(models.Model):
    _name = 'vet.patient'
    _description = 'Modelo de pacientes (mascotas)'

    name = fields.Char(string='Nombre de Mascota', help="Nombre de la mascota", required=True)
    birth_date = fields.Date(string='Fecha de nacimiento', help='Fecha de nacimiento de la mascota')
    age_pet = fields.Char(string='Edad', compute='_compute_age', help='Edad de la mascota', readonly=False)
    pet_breed = fields.Char(string='Raza', help='Raza de la mascota')
    image_patient = fields.Binary(string='Imagen', help='Imagen de la mascota')
    partner_id = fields.Many2one('res.partner', string='Due√±o', required=True)
    history_ids = fields.One2many('vet.appointment', 'pet_ids', string='Historial de citas')
</file>

<file path="security/ir.model.access.csv">
id,name,model_id:id,group_id:id,perm_read,perm_write,perm_create,perm_unlink
access_vet_patient,vet.patient.access,model_vet_patient,base.group_user,1,1,1,1
access_vet_appointment,vet.appointment.access,model_vet_appointment,base.group_user,1,1,1,1
access_vet_medication,vet.medication.access,model_vet_medication,base.group_user,1,1,1,1
access_vet_treatment,vet.treatment.access,model_vet_treatment,base.group_user,1,1,1,1
</file>

<file path="models/vet_appointment.py">
from odoo import models, fields

class VetAppointment(models.Model):
    _name = 'vet.appointment'
    _description = 'Todo el evento de la cita'

    code = fields.Char(string='Referencia')
    date_time = fields.Datetime(string='Fecha y hora', default=fields.Datetime.now ,required=True)
    partner_id = fields.Many2one('res.partner', string="Due√±o", required=True)
    pet_ids = fields.Many2one('vet.patient', string='Paciente', required=True)
    doctor_id = fields.Many2one('res.partner', string='Doctor', domain=[('is_vet_doctor', '=', True)])
    state = fields.Selection(
        [
            ('draft', 'Borrador'),
            ('confirmed', 'Confirmado'),
            ('done', 'Realizado'),
            ('cancel', 'Cancelado')
        ], default='draft'
    )
    description = fields.Text(string='Observaciones iniciales')

    payment_ids = fields.One2many(
        'account.payment',
        'vet_appointment_id',
        string='Pagos realizados'
    )
</file>

<file path="__manifest__.py">
{
    'name': 'Lummy Vet',
    'version': '17.0.1.0.0',
    'summary': 'Gesti√≥n de cl√≠nica veterinaria',
    'description': """Un sistema para Lummy-Vet que permite administrar sus pacientes (mascotas),
                    sus due√±os (clientes), las citas m√©dicas y el historial cl√≠nico""",
    'author': 'Lummy Vet Team (A. Marquina, G. Jaramillo)',
    'category': 'Servicio m√©dico',

    'depends': [
        'base',
        'contacts',
        'account',
    ],

    'data': [
        'security/ir.model.access.csv',

        'views/vet_appointment_views.xml',
        'views/inherit_res_partner_views.xml',
        
        'views/menus.xml'
    ],

    'demo': [],
    
    'auto_install': True,
    'application': True,
    'web_icon': 'lummy_vet,static/description/icon.png',
}
</file>

<file path="README.md">
<!-- INICIO DE LA DOCUMENTACI√ìN DEL PROYECTO -->
<br />
<div align="center">
  <a href="https://github.com/tu-usuario/lummy-vet">
    <!-- Ajusta la ruta de la imagen si es necesario -->
    <img src="static/description/icon.png" alt="Logo Lummy Vet" width="150" height="150">
  </a>

  <h3 align="center">Lummy Vet (VetOdoo)</h3>

  <p align="center">
    Sistema de gesti√≥n integral para cl√≠nicas veterinarias: Pacientes, Citas, Tratamientos y Pagos.
    <br />
    <br />
    <a href="https://github.com/tu-usuario/lummy-vet"><strong>Explora la documentaci√≥n ¬ª</strong></a>
    <br />
    <br />
    <a href="#">Ver Demostraci√≥n</a>
  </p>
</div>

<!-- ACERCA DEL PROYECTO -->
## üêæ Acerca del Proyecto

<br>

**Lummy Vet** es un m√≥dulo personalizado para **Odoo 17** dise√±ado para centralizar la administraci√≥n de una cl√≠nica veterinaria. Este proyecto nace para solucionar la p√©rdida de trazabilidad en historiales m√©dicos y la gesti√≥n manual de citas.

El sistema permite optimizar el flujo de trabajo desde la admisi√≥n hasta el cobro, garantizando que los due√±os y sus mascotas tengan un expediente claro, y que los doctores cuenten con herramientas r√°pidas para diagn√≥sticos y recetas.

### Tecnolog√≠as
<div style="display: flex; flex-wrap: wrap; justify-content: center; gap: 10px;">

  [![Odoo](https://img.shields.io/badge/Odoo-714B67?style=for-the-badge&logo=odoo&logoColor=white)](https://www.odoo.com/)
  [![Python](https://img.shields.io/badge/Python-3776AB?style=for-the-badge&logo=python&logoColor=white)](https://www.python.org/)
  [![XML](https://img.shields.io/badge/XML-orange?style=for-the-badge&logo=xml&logoColor=white)](https://www.w3.org/XML/)
  [![PostgreSQL](https://img.shields.io/badge/PostgreSQL-316192?style=for-the-badge&logo=postgresql&logoColor=white)](https://www.postgresql.org/)
  [![Git](https://img.shields.io/badge/git-%23F05033.svg?style=for-the-badge&logo=git&logoColor=white)](https://git-scm.com/)

</div>

<!-- ARQUITECTURA -->
## üèó Arquitectura del Sistema

Este proyecto implementa una **Arquitectura Modular por Features (Screaming Architecture)** para mejorar la mantenibilidad y el orden del c√≥digo.

```text
lummy_vet/
‚îú‚îÄ‚îÄ features/
‚îÇ   ‚îú‚îÄ‚îÄ appointments/  (Gesti√≥n de Citas y Agenda)
‚îÇ   ‚îú‚îÄ‚îÄ contacts/      (Extensiones para Due√±os y Doctores)
‚îÇ   ‚îú‚îÄ‚îÄ medications/   (Cat√°logo de Medicamentos)
‚îÇ   ‚îú‚îÄ‚îÄ patients/      (Expedientes de Mascotas)
‚îÇ   ‚îú‚îÄ‚îÄ payments/      (M√©todos de Pago)
‚îÇ   ‚îî‚îÄ‚îÄ treatments/    (Historial M√©dico y Diagn√≥sticos)
‚îú‚îÄ‚îÄ views/             (Men√∫s Principales)
‚îî‚îÄ‚îÄ static/            (Recursos Web)
```

<!-- MIEMBROS DEL EQUIPO -->
## üë• Miembros del Equipo

<table>
  <tr>
    <td align="center">
      <a href="https://github.com/tu-usuario-alessandro">
        <img src="https://ui-avatars.com/api/?name=Alessandro+Marquina&background=0D8ABC&color=fff&size=128" width="100px" style="border-radius:50%"/>
        <br />
        <sub><b>Alessandro Marquina</b></sub>
      </a>
      <br />
      Software Developer
    </td>
    <td align="center">
      <a href="https://github.com/tu-usuario-geraldo">
        <img src="https://ui-avatars.com/api/?name=Geraldo+Jaramillo&background=0D8ABC&color=fff&size=128" width="100px" style="border-radius:50%"/>
        <br />
        <sub><b>Geraldo Jaramillo</b></sub>
      </a>
      <br />
      Software Developer
    </td>
  </tr>
</table>
</file>

<file path="views/menus.xml">
<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <record id="action_view_vet_appointment" model="ir.actions.act_window">
        <field name="name">Registrar cita</field>
        <field name="res_model">vet.appointment</field>
    </record>

    <record id="action_view_res_partner" model="ir.actions.act_window">
        <field name="name">Clientes</field>
        <field name="res_model">res.partner</field>
        <field name="view_mode">kanban,tree,form</field>
        <field name="view_ids"
            eval="[(5, 0, 0),
            (0, 0, {'view_mode': 'tree', 'view_id': ref('res_partner_view_tree')}),
            (0, 0, {'view_mode': 'kanban', 'view_id': ref('res_partner_view_kanban')}),
            (0, 0, {'view_mode': 'form', 'view_id': ref('res_partner_view_form')})]" />
    </record>

    <record id="action_account_payments_vet" model="ir.actions.act_window">
        <field name="name">Pagos</field>
        <field name="res_model">account.payment</field>
        <field name="view_mode">tree,form</field>
        <field name="domain">[('partner_type', '=', 'customer')]</field>
        <field name="context">{'default_partner_type': 'customer', 'default_payment_type':
            'inbound'}</field>
    </record>

    <menuitem
        id="lummy_vet_menu_root"
        name="Lummy Vet"
        action="action_view_vet_appointment"
        web_icon="lummy_vet/static/description/icon.png" />

    <menuitem
        id="menu_res_partner"
        name="Clientes"
        parent="lummy_vet_menu_root"
        action="action_view_res_partner" />

    <menuitem
        id="menu_vet_payment"
        name="Pagos"
        parent="lummy_vet_menu_root"
        action="action_account_payments_vet"
        sequence="30" />
</odoo>
</file>

</files>
